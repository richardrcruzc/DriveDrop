@model  DriveDrop.Web.ViewModels.CurrentCustomerModel

@{
    ViewData["Title"] = "Details";
    var option = new DriveDrop.Web.ViewModels.TwoParameterModel { Id = Model.Id, Option = "result" };
}



<section class="sender-desh">
    <div class="container">
        <div class="main-cont">
            <div class="row">

                @await Html.PartialAsync("CustomerNavigation", option)

                <div id="content" class="col-sm-9">
                    <div id="gig-information" class="sender-form">
                        <h3 class="blue-head active">Sender Information</h3>
                        <div class="form-body">
                            <div class="profile-form">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="profile">
                                            <div class="photo">
                                                <input type="file" accept="image/*" id="my-file-selector-Personal" name="photoUrl">
                                                <div class="photo__helper">
                                                    <div class="photo__frame photo__frame--circle">
                                                        <canvas class="photo__canvas"></canvas>
                                                        <div class="message is-empty">
                                                            <p class="message--desktop">
                                                                @*<input type='file' id="my-file-selector-Personal" name="PersonalPhotoUri" />*@
                                                                <img id="Personal-image" src="@Model.PersonalPhotoUri" />

                                                                @*<img src="~/images/profile-icon.png">*@
                                                                
                                                                 
                                                            </p>
                                                            <p class="message--mobile">Tap here to select your picture.</p>
                                                        </div>
                                                        <div class="message is-loading">
                                                            <i class="fa fa-2x fa-spin fa-spinner"></i>
                                                        </div>
                                                        <div class="message is-dragover">
                                                            <i class="fa fa-2x fa-cloud-upload"></i>
                                                            <p>Drop your photo</p>
                                                        </div>
                                                        <div class="message is-wrong-file-type">
                                                            <p>Only images allowed.</p>
                                                            <p class="message--desktop">Drop your photo here or browse your computer.</p>
                                                            <p class="message--mobile">Tap here to select your picture.</p>
                                                        </div>
                                                        <div class="message is-wrong-image-size">
                                                            <p>Your photo must be larger than 350px.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                               
                                                <div class="photo__options hide">
                                                    <div class="photo__zoom">
                                                        <input type="range" class="zoom-handler">
                                                    </div><a href="javascript:;" class="remove"><i class="fa fa-trash"></i></a>
                                                </div>
                                            </div>
                                            <div class="form-field">
                                                <div class="col-xs-12">
    <label for="CustomerStatus" style="font-size:large; background:#43b249;color:#fff"> <span>  Status:  @Model.CustomerStatus</span> </label>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                   
                                    <div class="col-sm-9">
                                        <div class="driver-form">
                                            <div class="row">
                                                <form data-ajax-method="POST" asp-action="UpdateInfo" enctype="multipart/form-data"
                                                      data-ajax="true" data-ajax-mode="replace" data-ajax-update="#bar-notification">

                                                    @Html.AntiForgeryToken()


                                                    <input asp-for="Id" hidden />
                                                    <input asp-for="CustomerStatusId" hidden />
                                                    <input asp-for="CustomerStatus" hidden />
                                                    <input asp-for="PersonalPhotoUri" hidden />

                                                    <div class="title">
                                                        <strong>My Personal Information Details</strong><br /><br />
                                                    </div>
 
                                                    <div class="form-horizontal">
                                                       
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                <label for="FirstName">First Name</label>

                                                                <input asp-for="FirstName" placeholder="First name" class="form-control" />


                                                                <span asp-validation-for="FirstName" class="text-danger"></span>

                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                <label for="LastName">Last Name</label>
                                                                <input asp-for="LastName" placeholder="Last name" class="form-control" />

                                                                <span asp-validation-for="LastName" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                <label for="LastName">Email address</label>
                                                                <input asp-for="Email" placeholder="Email" class="form-control" />

                                                                <span asp-validation-for="Email " class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                @Html.LabelFor(m => m.PrimaryPhone)
                                                                @Html.TextBoxFor(m => m.PrimaryPhone, new { @data_inputmask = "'mask': '(999) 999-9999'", @class = "form-control" })


                                                                <span asp-validation-for="PrimaryPhone" class="text-danger"></span>


                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                @Html.LabelFor(m => m.Phone)
                                                                @Html.TextBoxFor(m => m.Phone, new { @data_inputmask = "'mask': '(999) 999-9999'", @class = "form-control" })

                                                                
                                                                <span asp-validation-for="Phone" class="text-danger"></span>



                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                <label for="VerificationId">Verification ID</label>
                                                                <input asp-for="VerificationId" placeholder="Verification ID" class="form-control" />

                                                                <span asp-validation-for="VerificationId" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-field">
                                                            <div class="col-lg-12">
                                                                 <br />
                                                            </div>
                                                        </div>

                                                        <div class="post-gig"> 
                                                            <input type="submit" value="Save" name="save-info-button" class="bttn save-customer-info-button" />
                                                        </div>

                                                        <div class="center-block bg-primary text-center" id="bar-notification">

                                                        </div>

                                                    </div>


                                                </form>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                    </div>
                            <div class="clearfix"></div>
                                </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
                                    
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>

            $(function () {
                $('form').submit(function () {
                    var data = new FormData();
                    i = 0;

                    $(".file-select").each(function () { data.append($(this).val(), $(this).get(0).files[0]); i++; })

                    var postData = $('#fields :input');

                    $.each(postData, function (key, input) {
                        alert(input.name);
                        alert(input.value);
                        data.append(input.name, input.value);
                    });



                    if ($(this).valid()) {
                        $.ajax({
                            url: this.action,
                            type: this.method,
                            data: data, // $(this).serialize(),
                            success: function (result) {
                                $('#bar-notification').html(result);
                                alert(result);
                            },
                            error: function (response) {
                                alert("Error:" + response);
                            }
                        });
                    }
                    return false;
                });
            });


            function readURL(input) {

                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#Personal-image').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }
            $("#my-file-selector-Personal").change(function () {
                readURL(this);
            });

         





                                        </script>
<script src="~/js/profile.js"></script>

                                    }
